<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Webpage Screenshots - HTML5 and Javascript"
    />
    <meta name="author" content="Shivaji R." />
    <title>Webpage Screenshots - HTML5 and Javascript</title>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700"
      rel="stylesheet"
      type="text/css"
    />

    <link rel="stylesheet" href="./main.css" />
  </head>
  <body>
    <section id="social-app-wrapper">
      <div class="box">
        <h2>Social Apps</h2>
        <ul>
          <li>Instagram</li>
          <li>Facebook</li>
          <li>Twitter</li>
          <li>LinkedIn</li>
          <li>PIntrest</li>
          <li>Snapchat</li>
        </ul>
      </div>
    </section>
    <section id="profile-wrapper">
      <div class="card-container">
        <img class="round" src="./images/avatar.png" alt="user" />
        <h3>Max Mustermann</h3>
        <p>Software Engineer</p>
        <div class="skills">
          <h6>Skills</h6>
          <ul>
            <li>UI / UX</li>
            <li>Front End Development</li>
            <li>Python</li>
          </ul>
        </div>
      </div>
    </section>
    <section id="event-wrapper">
      <div id="content">
        <div id="tile1" class="tile">
          <div class="wrapper">
            <div class="header">Event Title</div>

            <div class="dates">
              <div class="start">
                <strong>STARTS</strong>
                12:30 JAN 2015
                <span></span>
              </div>
              <div class="ends">
                <strong>ENDS</strong>
                14:30 JAN 2015
              </div>
            </div>

            <div class="stats">
              <div>
                <strong>INVITED</strong>
                3098
              </div>
              <div>
                <strong>JOINED</strong>
                562
              </div>
              <div>
                <strong>DECLINED</strong>
                182
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="action">
      <button class="button" onclick="socialPage();">Get Social Apps</button>
      <button class="button" onclick="profilePage();">Get Profile</button>
      <button class="button" onclick="eventPage();">Get Event</button>
      <button class="button" onclick="completePage();">
        Get Complete Screen
      </button>
    </section>
    <section id="screenshot-wrapper">
      <img src="" id="screenshot" style="display: none" />
    </section>
  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
  <script type="text/javascript">
    function socialPage() {
      html2canvas(document.querySelector("#social-app-wrapper"), {
        onrendered: function (canvas) {
          const img = canvas.toDataURL();
          $("#screenshot").attr("src", img).show();
          canvas.toBlob(function (blob) {
            saveAs(blob, "social.png");
          });
        },
        allowTaint: true,
        imageTimeout: 0,
        useCORS: true,
      });
      return false;
    }

    function profilePage() {
      html2canvas(document.querySelector("#profile-wrapper"), {
        onrendered: function (canvas) {
          const img = canvas.toDataURL();
          $("#screenshot").attr("src", img).show();
          canvas.toBlob(function (blob) {
            saveAs(blob, "profile.png");
          });
        },
        allowTaint: true,
        imageTimeout: 0,
        useCORS: true,
      });
      return false;
    }

    function eventPage() {
      html2canvas(document.querySelector("#event-wrapper"), {
        onrendered: function (canvas) {
          const img = canvas.toDataURL();
          $("#screenshot").attr("src", img).show();
          canvas.toBlob(function (blob) {
            saveAs(blob, "event.png");
          });
        },
        allowTaint: true,
        imageTimeout: 0,
        useCORS: true,
      });
      return false;
    }

    function completePage() {
      html2canvas(document.body, {
        onrendered: function (canvas) {
          const img = canvas.toDataURL();
          $("#screenshot").attr("src", img).show();

          canvas.toBlob(function (blob) {
            // if want to send image to api then send blob object.
            // to save image
            saveAs(blob, "completePage.png");
          });
        },
      });
      return false;
    }
  </script>
</html>
